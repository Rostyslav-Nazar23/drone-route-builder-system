# Drone Route Builder System

Система планування маршрутів літальних дронів

## Опис

Система для планування маршрутів літальних дронів з підтримкою:
- Планування маршрутів для одного або кількох дронів
- Алгоритми пошуку шляху (A*)
- Валідація маршрутів (no-fly зони, висота, енергія)
- Візуалізація на інтерактивній карті
- Експорт у формат .plan та JSON

## Встановлення

1. Створіть віртуальне середовище:
```bash
python -m venv venv
source venv/bin/activate  # Linux/Mac
# або
venv\Scripts\activate  # Windows
```

2. Встановіть залежності:
```bash
pip install -r requirements.txt
```

## Запуск

### Streamlit UI (рекомендовано)
```bash
streamlit run app/streamlit_app.py
```

Відкрийте браузер за адресою http://localhost:8501

### FastAPI Backend
```bash
uvicorn app.main:app --reload
```

API документація доступна за адресою http://localhost:8000/docs

## Використання

### Через Streamlit UI

1. Відкрийте Streamlit додаток
2. Налаштуйте параметри дрона в бічній панелі
3. Додайте цільові точки (вручну або імпортуйте з файлу)
4. Налаштуйте депо (стартову точку)
5. Натисніть "Plan Route" для планування маршруту
6. Перегляньте результат на карті
7. Експортуйте маршрут у формат .plan або JSON

### Імпорт даних

Підтримуються формати:
- **CSV**: колонки latitude, longitude, altitude, name
- **GeoJSON**: Point features для waypoints, Polygon/MultiPolygon для no-fly зон

### Експорт

- **.plan**: формат QGroundControl для імпорту в автопілот
- **JSON**: структурований формат для подальшої обробки

## Структура проєкту

```
app/
├── domain/          # Доменні моделі (Mission, Drone, Route, Waypoint)
├── data_import/     # Імпорт даних (CSV, GeoJSON)
├── environment/     # Навігаційний граф та модель вартості
├── planning/        # Алгоритми планування (A*)
├── validation/     # Валідація маршрутів
├── visualization/   # Візуалізація на карті
├── export/          # Експорт маршрутів
├── api/             # FastAPI endpoints
├── orchestrator/    # Координація планування
├── main.py          # FastAPI додаток
└── streamlit_app.py # Streamlit UI
```

## Функціональність

### Планування
- A* алгоритм для пошуку оптимального шляху
- Підтримка grid-based та waypoint-based графів
- Урахування обмежень дрона (висота, швидкість, батарея)
- **Інтеграція метеоданих (Open Meteo API)**
  - Врахування вітру при розрахунку вартості маршруту
  - Перевірка безпеки польоту за погодними умовами
  - Оптимізація маршруту з урахуванням вітру (попутний/зустрічний)

### Валідація
- Перевірка no-fly зон
- Перевірка висотних обмежень
- Перевірка енергетичних витрат
- Перевірка кінематичних обмежень

### Візуалізація
- Інтерактивна карта з маршрутами
- Відображення waypoints, депо, no-fly зон
- Метрики маршруту

## Розробка

Система реалізована модульно з чітким розділенням відповідальності:
- Доменна модель незалежна від UI
- Алгоритми планування можуть використовуватися окремо
- Валідація та візуалізація - окремі модулі

## Майбутні покращення

- Theta* та D* алгоритми
- VRP для мультидронових місій
- Генетичні алгоритми оптимізації
- Підтримка PostgreSQL/PostGIS
- Dubins Airplane для кінематичних обмежень
- Розширена візуалізація погодних умов на карті

## Ліцензія

Проєкт створено для магістерської роботи.

